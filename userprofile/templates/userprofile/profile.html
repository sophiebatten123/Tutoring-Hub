{% extends "base.html" %}
{% load static %}
{% load account %}
{% load crispy_forms_tags %}
{% block content %}


<div class="container-fluid center-block">
    <div class="row profile">
        {% if profile.full_name %}
            <div class="col-3">
                <div class="row">
                    <div class="col-12 user-image"><img src="../../static/images/user.png" alt="cartoon image of a person"></div>
                </div>
                <div class="row">
                    <div class="col-12 user-info">
                        <h1>{{ profile.full_name }}</h1>
                        <p>Year {{ profile.year_group }} Student</p>
                    </div>
                </div>
                <div class="row center-block">
                    <div class="col-10">
                        <button class="btn btn-signup btn-lg user-btns" id="profile-btn">Profile Page</button>
                        <button class="btn btn-signup btn-lg user-btns" id="upcoming-lessons-btn">Upcoming Lessons</button>
                        <button class="btn btn-signup btn-lg user-btns" id="previous-lessons-btn">Previous Lessons</button>
                        <button class="btn btn-signup btn-lg user-btns" id="edit-btn">Edit Profile</button>
                    </div>
                </div>
            </div>
            <div class="col-5 about-text" id="about-me">
                <div class="row about-spacer">
                    <h3>About Me!</h3>
                    <p>{{ profile.about_me }}</p>
                    <p>Current grade: Grade {{ profile.current_grade }}</p>
                    <p>Predicted grade: Grade {{ profile.predicted_grade }}</p>
                </div>
            </div>
            <div class="col-4" id="about-subject">
                <div class="row subjects" id="science">
                    <div class="col-8">
                        <h3>Science <i class="fa-solid fa-flask"></i></h3>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                    </div>
                    <div class="col-4 grade-text">
                        <p>Current grade: Grade {{ profile.current_grade }}</p>
                        <p>Predicted grade: Grade {{ profile.predicted_grade }}</p>
                        <a class="nav-link book-btn profile-tutor-buttons" href="{% url 'tutor_two' %}">Book Lesson</a>
                    </div>
                </div>
                <div class="row subjects" id="maths">
                    <div class="col-8">
                        <h3>Maths <i class="fa-solid fa-calculator"></i></h3>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                    </div>
                    <div class="col-4 grade-text">
                        <p>Current grade: Grade {{ profile.current_grade }}</p>
                        <p>Predicted grade: Grade {{ profile.predicted_grade }}</p>
                        <a class="nav-link book-btn profile-tutor-buttons" href="{% url 'tutor_one' %}">Book Lesson</a>
                    </div>
                </div>
                <div class="row subjects" id="english">  
                    <div class="col-8">
                        <h3>English <i class="fa-solid fa-pen"></i></h3>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                        <p><i class="fa-solid fa-question"></i></p>
                    </div>
                    <div class="col-4 grade-text">
                        <p>Current grade: Grade {{ profile.current_grade }}</p>
                        <p>Predicted grade: Grade {{ profile.predicted_grade }}</p>
                        <a class="nav-link book-btn profile-tutor-buttons" href="{% url 'tutor_three' %}">Book Lesson</a>
                    </div>
                </div>
            </div>
            <div class="col-9" id="upcoming-lessons">
                <div class="row">
                    <h3>Your upcoming lessons are:</h3>
                    {% for booking in bookings %}
                    <div class="col-12">
                        <table class="table-space">
                            <tr>
                                <td id="booking_id">{{ booking.id }} </td>
                            </tr>
                            <tr>
                                <td class="bold">{{ booking.subject }} Lesson <span class="type">Online</span></td>
                            </tr>
                            <tr>
                                <td>{{ booking.tutor }}</td>
                            </tr>
                            <tr>
                                <td>{{ booking.date }}</td>
                            </tr>
                            <tr>
                                <td>{{ booking.time }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-complete btn-lg">Rate Lesson</button>
                                    <button class="btn btn-delete btn-lg" onclick="deleteBooking()">Cancel</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-9" id="previous-lessons">
                <div class="row">
                    <h3>Your previous lessons are:</h3>
                </div>
            </div>
            <div class="col-9" id="make-profile">
                <div class="row exit-profile">
                    <button class="btn btn-signup btn-lg" id="exit-btn"><i class="fa-solid fa-circle-xmark"></i></button>
                </div>
                <div class="row">
                    <form method="post">
                        {{ form | crispy}}
                        {% csrf_token %}
                        <button type="submit" class="btn btn-signup btn-lg">Submit</button>
                    </form>
                </div>
            </div>
        {% else %}
        <div class="col-3">
            <div class="row">
                <div class="col-12 user-image"><img src="../../static/images/user.png" alt="cartoon image of a person"></div>
            </div>
            <div class="row center-block">
                <div class="col-10">
                    <button class="btn btn-signup btn-lg user-btns hidden" id="profile-btn">Profile Page</button>
                    <button class="btn btn-signup btn-lg user-btns hidden" id="upcoming-lessons-btn">Upcoming Lessons</button>
                    <button class="btn btn-signup btn-lg user-btns hidden" id="previous-lessons-btn">Previous Lessons</button>
                </div>
            </div>
        </div>
        <div class="col-9 about-text" id="about-me">
            <div class="row about-spacer">
                <h2>Weclome {{ request.user }}! </h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis efficitur velit nec nunc imperdiet, sit
                    amet eleifend lorem iaculis. Donec convallis condimentum lectus ut interdum. Nam facilisis, ante at
                    dapibus gravida, risus dolor mollis enim, nec dignissim nibh neque non ipsum. Duis venenatis, orci
                    vitae porta ultrices, sapien diam varius lorem, et pulvinar orci elit ut dolor. Aliquam erat
                    volutpat. Nam suscipit mauris et mauris imperdiet euismod. Pellentesque habitant morbi tristique
                    senectus et netus et malesuada fames ac turpis egestas. Ut quis risus ligula. Nulla facilisi. Sed
                    laoreet urna nisl, tristique pharetra urna egestas eu. In quis arcu egestas, pellentesque dui eget,
                    molestie tortor.</p>
                <button class="btn btn-signup btn-lg user-btns btn-color" id="edit-btn">Create Profile</button>
            </div>
        </div>
        <div class="col-9" id="upcoming-lessons">
            <div class="row">
                <h3>Your upcoming lessons are:</h3>
            </div>
        </div>
        <div class="col-9" id="previous-lessons">
            <div class="row">
                <h3>Your previous lessons are:</h3>
            </div>
        </div>
        <div class="col-9" id="make-profile">
            <div class="row exit-profile">
                <button class="btn btn-signup btn-lg" id="exit-btn"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="row">
                <form method="post">
                    {{ form | crispy}}
                    {% csrf_token %}
                    <button type="submit" class="btn btn-signup btn-lg">Submit</button>
                </form>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block postloadjs %}
<script src="{% static 'js/profile.js' %}"></script>
{% endblock %}