{% extends "base.html" %}
{% load static %}
{% load account %}
{% load crispy_forms_tags %}
{% block content %}


<div class="container-fluid center-block">
    <div class="row profile">
        {% if profile.full_name %}
            <div class="col-3">
                <div class="row">
                    <div class="col-12 user-image"><img src="../../static/images/user.png" alt="cartoon image of a person"></div>
                </div>
                <div class="row">
                    <div class="col-12 user-info">
                        <h1>{{ profile.full_name }}</h1>
                        <p>Year {{ profile.year_group }} Student</p>
                    </div>
                </div>
                <div class="row center-block">
                    <div class="col-10">
                        <button class="btn btn-signup btn-lg user-btns" id="profile-btn">Profile Page</button>
                        <button class="btn btn-signup btn-lg user-btns" id="upcoming-lessons-btn">Upcoming Lessons</button>
                        <button class="btn btn-signup btn-lg user-btns" id="edit-btn">Edit Profile</button>
                    </div>
                </div>
            </div>
            <div class="col-9 about-text" id="about-me">
                <div class="row about-spacer">
                    <h3>About Me!</h3>
                    <p>{{ profile.about_me }}</p>
                    <hr />
                </div>
                <div class="row">
                    <div class="col-4 profile-subjects">
                        <h3>Maths: <i class="fa-solid fa-calculator"></i></h3>
                        <hr />
                        <p class="profile-text">"{{ profile.maths }}"</p>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <a class="nav-link book-btn homepage-buttons" id="profile-booking-button" href="{% url 'tutor_one' %}">Book in a Maths Lesson</a>
                    </div>
                    <div class="col-4 profile-subjects">
                        <h3>Science: <i class="fa-solid fa-flask"></i></h3>
                        <hr />
                        <p class="profile-text">"{{ profile.science }}"</p>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <a class="nav-link book-btn homepage-buttons" id="profile-booking-button" href="{% url 'tutor_two' %}">Book in a Science Lesson</a>
                    </div>
                    <div class="col-4 profile-subjects">
                        <h3>English: <i class="fa-solid fa-pen"></i></h3>
                        <hr />
                        <p class="profile-text">"{{ profile.english }}"</p>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <a class="nav-link book-btn homepage-buttons" id="profile-booking-button" href="{% url 'tutor_three' %}">Book in an English Lesson</a>
                    </div>
                    <hr />
                </div>
                <div class="row tutor-booking-info" id="profile-teams-info">
                    <h5>All lessons take place virtually using Microsoft Teams. For more information: <a
                        href="https://www.microsoft.com/en-gb/microsoft-teams/group-chat-software?rtc=1"
                        target="blank">Click Here</a><br> Lessons are available to book on a weekly basis, please book ahead to avoid
                        disapointment.</h5>
                </div>
            </div>
            <div class="col-9" id="upcoming-lessons">
                <div class="row">
                    <h3>Your upcoming lessons are:</h3>
                    {% for booking in bookings %}
                    <div class="col-12">
                        <table class="table-space">
                            <tr>
                                <td class="bold">{{ booking.subject }} Lesson <span class="type">Online</span></td>
                            </tr>
                            <tr>
                                <td>{{ booking.tutor }}</td>
                            </tr>
                            <tr>
                                <td class="booking-dates">{{ booking.date }}</td>
                            </tr>
                            <tr>
                                <td>{{ booking.time }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <button class="btn btn-delete btn-lg" value="{{ booking.id }}">Cancel</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-9" id="make-profile">
                <div class="row exit-profile">
                    <button class="btn btn-signup btn-lg" id="exit-btn"><i class="fa-solid fa-circle-xmark"></i></button>
                </div>
                <div class="row">
                    <form method="post">
                        {{ form | crispy}}
                        {% csrf_token %}
                        <button type="submit" class="btn btn-signup btn-lg">Submit</button>
                    </form>
                </div>
            </div>
        {% else %}
        <div class="col-3">
            <div class="row">
                <div class="col-12 user-image"><img src="../../static/images/user.png" alt="cartoon image of a person"></div>
            </div>
            <div class="row center-block">
                <div class="col-10">
                    <button class="btn btn-signup btn-lg user-btns hidden" id="profile-btn">Profile Page</button>
                    <button class="btn btn-signup btn-lg user-btns hidden" id="upcoming-lessons-btn">Upcoming Lessons</button>
                </div>
            </div>
        </div>
        <div class="col-9 about-text" id="about-me">
            <div class="row about-spacer">
                <h2>Weclome {{ request.user }}! </h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis efficitur velit nec nunc imperdiet, sit
                    amet eleifend lorem iaculis. Donec convallis condimentum lectus ut interdum. Nam facilisis, ante at
                    dapibus gravida, risus dolor mollis enim, nec dignissim nibh neque non ipsum. Duis venenatis, orci
                    vitae porta ultrices, sapien diam varius lorem, et pulvinar orci elit ut dolor. Aliquam erat
                    volutpat. Nam suscipit mauris et mauris imperdiet euismod. Pellentesque habitant morbi tristique
                    senectus et netus et malesuada fames ac turpis egestas. Ut quis risus ligula. Nulla facilisi. Sed
                    laoreet urna nisl, tristique pharetra urna egestas eu. In quis arcu egestas, pellentesque dui eget,
                    molestie tortor.</p>
                <button class="btn btn-signup btn-lg user-btns btn-color" id="edit-btn">Create Profile</button>
            </div>
        </div>
        <div class="col-9" id="upcoming-lessons">
            <div class="row">
                <h3>Your upcoming lessons are:</h3>
            </div>
        </div>
        <div class="col-9" id="make-profile">
            <div class="row exit-profile">
                <button class="btn btn-signup btn-lg" id="exit-btn"><i class="fa-solid fa-circle-xmark"></i></button>
            </div>
            <div class="row">
                <form method="post">
                    {{ form | crispy}}
                    {% csrf_token %}
                    <button type="submit" class="btn btn-signup btn-lg">Submit</button>
                </form>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block postloadjs %}
<script src="{% static 'js/profile.js' %}"></script>
{% endblock %}